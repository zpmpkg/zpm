{
    "type": "object",
    "oneOf": [
        {
            "$ref": "#/definitions/PackageDefinition"
        },
        {
            "properties": {
                "versions": {
                    "type": "string"
                },
                "definition": {
                    "$ref": "#/definitions/PackageDefinition"
                }
            },
            "additionalProperties": false,
            "required": [
                "versions",
                "definition"
            ]
        }
    ],
    "definitions": {
        "PackageDefinition": {
            "type": "object",
            "properties": {
                "development": {
                    "$ref": "#/definitions/PackageEntries"
                },
                "requires": {
                    "$ref": "#/definitions/PackageEntries"
                }
            }
        },
        "PackageEntry": {
            "oneOf": [
                {
                    "$ref": "#/definitions/PackageGDGSEntry"
                },
                {
                    "$ref": "#/definitions/PackageGDPSEntry"
                },
                {
                    "$ref": "#/definitions/PackagePDPSEntry"
                },
                {
                    "$ref": "#/definitions/PackagePDGSEntry"
                }
            ]
        },
        "PackageSettings": {
            "type": "object",
            "patternProperties": {
                "\\w+": {
                    "type": "array",
                    "items": {},
                    "additionalItems": false
                }
            },
            "additionalProperties": false
        },
        "PackageGDGSEntry": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "pattern": "^([a-zA-Z0-9_\\-]{2,50}/[a-zA-Z0-9_\\-]{2,50})$"
                },
                "repository": {
                    "type": "string",
                    "pattern": "^(https://.*\\.git)$"
                },
                "definition": {
                    "type": "string",
                    "pattern": "^(https://.*\\.git)$"
                },
                "version": {
                    "type": "string"
                },
                "optional": {
                    "type": "boolean"
                },
                "settings": {
                    "$ref": "#/definitions/PackageSettings"
                }
            },
            "additionalProperties": false,
            "required": [
                "name",
                "version"
            ]
        },
        "PackageGDPSEntry": {
            "type": "object",
            "properties": {
                "repository": {
                    "type": "string",
                    "pattern": "^(https://.*\\.git)$"
                },
                "path": {
                    "type": "string"
                },
                "optional": {
                    "type": "boolean"
                },
                "settings": {
                    "$ref": "#/definitions/PackageSettings"
                }
            },
            "additionalProperties": false,
            "required": [
                "repository",
                "path"
            ]
        },
        "PackagePDGSEntry": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "pattern": "^([a-zA-Z0-9_\\-]{2,50}/[a-zA-Z0-9_\\-]{2,50})$"
                },
                "definition": {
                    "type": "string"
                },
                "repository": {
                    "type": "string",
                    "pattern": "^(https://.*\\.git)$"
                },
                "version": {
                    "type": "string"
                },
                "optional": {
                    "type": "boolean"
                },
                "settings": {
                    "$ref": "#/definitions/PackageSettings"
                }
            },
            "additionalProperties": false,
            "required": [
                "name",
                "definition",
                "version"
            ]
        },
        "PackagePDPSEntry": {
            "type": "object",
            "properties": {
                "path": {
                    "type": "string"
                },
                "optional": {
                    "type": "boolean"
                },
                "settings": {
                    "$ref": "#/definitions/PackageSettings"
                }
            },
            "additionalProperties": false,
            "required": [
                "path"
            ]
        },
        "PackageEntries": {
            "type": "object",
            "patternProperties": {
                "\\w+": {
                    "$ref": "#/definitions/PackageSingularArrayEntry"
                }
            }
        },
        "PackageSingularArrayEntry": {
            "oneOf": [
                {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/PackageEntry"
                    },
                    "additionalItems": false
                },
                {
                    "$ref": "#/definitions/PackageEntry"
                }
            ]
        }
    }
}
